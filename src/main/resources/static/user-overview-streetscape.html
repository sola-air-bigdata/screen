<script src="./js/jquery.min.js"></script>

<section class="site_center site_center1 fl" style="padding-top: 12%;width:18%;">

  <div style="width:420px;background: linear-gradient(to left,rgba(12, 37, 121,0), rgba(12, 37, 121,0.8));
		position: absolute;height: 1038px;top: -48px;left: 19px;"></div>

  <div class="center_title pos_abs">
    <div id="service_users" class="animate_inside"></div>
    <h1 style="font-size:18px;width: 160px;">本日充电用户数</h1>
  </div>

  <div class="pos_abs" style="margin-top:70px;">

    <span style="font-size:40px;" id="in_service_user_total" class="myfont">812</span> <span>个</span>

  </div>

  <div class="revenue_operation mt20 pos_abs" style="top:240px;">

    <div class="power_value">

      <span style="font-size: 24px;font-weight: 600;" id="person_count" class="myfont">352</span>

      <span style="font-size: 15px;">个</span>

      <p style="float: right;">

        <span style="color:#E79E26;font-size: 24px;font-weight: 600;" id="team_count" class="myfont">500</span>

        <span style="color:#E79E26;font-size: 15px;">个</span>

      </p>

    </div>

    <ul class="data_list" style="width:186px;">

      <li id="p_percent" style="width:50%;height:10px;background: linear-gradient(to right,#47D3FF, #00B4FF);"></li>

      <li id="t_percent" style="width:50%;height:10px;background: linear-gradient(to right,#FFAB00, #FFDB65);"></li>

    </ul>

    <div class="power_value">个人:

      <span id="person_percent" class="myfont">40%</span>

      <p style="float: right;">车队:

        <span style="color:#E79E26;" id="team_percent" class="myfont">60%</span>

      </p>

    </div>

  </div>

  <div class="build mt40 pos_abs" style="top:320px;">

    <img width="36" src="./img/app.png" alt="" style="margin-top:0px;">

    <p style="margin-top:-6px;font-size:16px;">APP用户

      <span style="font-size:32px;" id="app_users" class="myfont">300</span>

      <span>个</span>

    </p>

  </div>

  <div class="build mt40 pos_abs" style="top:380px;">

    <img width="36" src="./img/weixin.png" alt="" style="margin-top:0px;">

    <p style="margin-top:-6px;font-size:16px;">微信用户

      <span style="font-size:32px;" id="wechat_users" class="myfont">52</span>

      <span>个</span>

    </p>

  </div>

  <div class="build_chart pos_abs" style="top:430px;">

    <div id="user_build" class="mt40" style="height:150px;width:150px;"></div>

    <div style="position: absolute;top:72px;left:64px;">

      <p>

        <span style="font-size:34px;" id="in_service_users" class="myfont">200</span>个

      </p>

      <p style="color:#8BC6FB;margin-top:10px;font-size: 16px;">服务中用户</p>

    </div>

  </div>

</section>

<section class="site_center site_center2 fl" style="height: 980px;">
  <div id="mapcontainer2" style="width:1038px;height:1078px;position: absolute;left:-171px;top:-48px;"></div>
  <div class="center_nav" style="bottom:-100px;left: 56px;">
    <ul>
      <li>
        <p id="user_panorama">
          <img width="42" src="./img/panorama.png" alt=""><span>全景视图</span>
        </p>
      </li>
      <li class="active">
        <p id="user_streetscape">
          <img width="42" src="./img/streetscape.png" alt="" style="left:40px;"><span>街景视图</span>
        </p>
      </li>
    </ul>

  </div>

  <div class="center_list">
    <ul>
      <li id="site_overview">
        <img src="./img/distribution.png" alt="" style="left: 8px;width: 16px;height: 18px;top:10px;">
        <p>站点分布</p>
      </li>
      <li class="active" id="user_overview">
        <img src="./img/user.png" alt="" style="height:18px;top:9px;left:7px;">
        <p>站点用户</p>
      </li>
      <li id="income_overview">
        <img src="./img/revenue.png" alt="">
        <p>站点收入</p>
      </li>
    </ul>
  </div>

</section>

<section class="site_center site_center3 fl" style="padding-top: 12%;padding-left:44px;width: 21%;">
  <div style="width:420px;background: linear-gradient(to right,rgba(12, 37, 121,0), rgba(12, 37, 121,0.8));
		position: absolute;height: 1038px;top: -48px;right: -1px;"></div>

  <div class="center_title pos_abs">
    <div id="add_user" class="animate_inside"></div>
    <h1>新用户信息</h1>
  </div>

  <div class="mt20 pos_rel" style="margin-top: 60px;">
    <p>
      <span style="font-size:40px;" id="add_user_count" class="myfont"></span>

      <span style="font-size:18px;"> 个 </span>

    <p style="font-size:18px;color:#8BC6FB;">当日新增

      <span style="font-size:40px;" id="add_user_today" class="myfont"></span>

      <span style="font-size:18px;"> 个 </span>
    </p>
    </p>
  </div>

  <div class="mt40 pos_abs" style="top:258px;">

    <h1 style="font-weight: 500;font-size: 20px;">新增用户趋势</h1>

    <div id="add_trend" style="height:128px;width:144%;"></div>

  </div>

  <div class="mt40 pos_abs" style="top:430px;">

    <h1 style="font-weight: 500;font-size: 20px;">总用户增长趋势</h1>

    <div id="user_total" style="height:128px;width:136%;"></div>

  </div>

</section>
<div class="line"></div>
<div class="line1"></div>

<!-- 用户总览(街景)展示数据项  end-->

<!-- <script src="./js/3.js"></script> -->
<!-- <script src="./js/jquery.countup.js" type="text/javascript" charset="utf-8"></script>
<script src="./js/jquery.waypoints.min.js" type="text/javascript" charset="utf-8"></script> -->
<script src="./js/TweenLite.min.js" type="text/javascript"></script>
<script src="./js/lem_counter.js" type="text/javascript"></script>
<script src="./js/getuserInfo.js" type="text/javascript" charset="utf-8"></script>
<script src="./js/getanimate.js" type="text/javascript" charset="utf-8"></script>


<script>
  $("#income_overview").click(function () {

    $('#part').load('./income-overview-streetscape.html', function () {
      $.myAnimate.incomeAnimate();
    });

  })



  $("#user_overview").click(function () {

    $('#part').load('./user-overview-streetscape.html', function () {
      $.myAnimate.userAnimate();
    });

  })



  $("#site_overview").click(function () {

    $('#part').load('./site-overview-streetscape.html', function () {
      $.myAnimate.siteAnimate();
    });

  })



  $("#user_panorama").click(function () {

    $('#part').load('./user-overview.html', function () {
      $.myAnimate.userAnimate();
    });

  })
</script>



<script>
  window.forceWebGL = true;

  var map2 = new AMap.Map('mapcontainer2', {

    resizeEnable: true,

    rotateEnable: true,

    pitchEnable: true,

    zoom: 10,

    pitch: 50,

    viewMode: '3D', //开启3D视图,默认为关闭

    buildingAnimation: true, //楼块出现是否带动画

    mapStyle: 'amap://styles/39da5b5a6ff18f26344edb0027f314b2',

    expandZoomRange: true,

    zooms: [3, 20],

    center: [113.264943, 23.15551]

  });
  getStationInServiceMapData();

  function getStationInServiceMapData() {

    $.ajax({

      url: "/statistic/GuangJiaoUsersViewAjax/getStationInServiceMapData.json",

      data: {},

      dataType: "json",

      type: "POST",

      success: function (data) {

        var markers = [],
          positions = [];

        for (var i in data) {

          var position = {
            "siteid": data[i].stationId,
            "sitename": data[i].stationName,
            "sitexy": [data[i].lng, data[i].lat]
          };

          positions.push(position);

        }

        buildMarkers(markers, positions);

      },

      error: function () {

        AMUI.dialog.alert({
          title: '温馨提示',
          content: "网络异常！请稍后..."
        });

      }

    });

  }
  function buildMarkers(markers, positions) {

    var icon = new AMap.Icon({
      size: new AMap.Size(58, 58),   // 图标尺寸
      image: 'img/marker.png',  // Icon的图像
      imageSize: new AMap.Size(58, 58),   // 根据所设置的大小拉伸或压缩图片

    });

    for (var i = 0, marker; i < positions.length; i++) {
      marker = new AMap.Marker({
        map: map2,
        position: positions[i]["sitexy"],
        offset: new AMap.Pixel(-22, -47),
        icon: icon, // 添加 Icon 图标 URL
        title: positions[i]["sitename"],
        siteid: positions[i]["siteid"],
      });
      marker.on('click', function () {
        location.href = "./individual-users-inside.html?stationID=" + this.B.siteid;
      });
      markers.push(marker);
    }
  }
</script>