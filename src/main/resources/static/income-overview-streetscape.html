<script src="./js/jquery.min.js"></script>

<script src="//cache.amap.com/lbs/static/es5.min.js"></script>

<script>window.forceWebGL = true;</script>

<section class="site_center site_center1 fl" style="padding-top: 8%;width:18%;">
  <div style="width:420px;background: linear-gradient(to left,rgba(12, 37, 121,0), rgba(12, 37, 121,0.8));
		position: absolute;height: 1038px;top: -48px;left: 19px;"></div>

  <div class="center_title pos_abs">
    <div id="amount_income" class="animate_inside"></div>
    <h1>当日总收入</h1>
  </div>

  <div class="pos_abs" style="margin-top:70px;">
    <span style="font-size:40px;" id="actualBalanceAll" class="myfont">13182.73</span> <span>元</span>
  </div>

  <div class="revenue_operation pos_abs" style="top:210px;">
    <ul class="data_list percentof" style="width:160px;">
      <li style="width:90%;height:10px;background: linear-gradient(to right,#47D3FF, #00B4FF);"></li>
      <li style="width:10%;height:10px;background: linear-gradient(to right,#FFAB00, #FFDB65);"></li>
    </ul>

    <div class="power_value">充电:<span id="chargingPercent" class="myfont">90%</span>
      <p style="float: right;">其他:<span style="color:#E79E26;" id="numQitaPercent" class="myfont">10%</span></p>
    </div>
  </div>

  <div class="gun pos_abs" style="top:268px;">
    <img width="36" src="./img/overview-4.png" alt="">
    <p style="width: 168px;">当日充电收入</p>
    <p style="margin-top:6px;"><span style="font-size:40px;" id="powerBalanceAll" class="myfont">12801.11</span><span
        style="font-size:18px;">元</span></p>
  </div>

  <div class="build_chart pos_abs" style="top:325px;">
    <div id="build_income" class="mt40" style="height:132px;width:132px;left:0px;"></div>

    <div style="position: absolute;top:70px;left:40px;width: 110px;">

      <p style="font-size:14px;"><span style="font-size:22px;" id="GongJiaoPowerBalance" class="myfont">12118</span>元
      </p>

      <p style="color:#8BC6FB;font-size:14px;">公交充电</p>

      <p style="color:#E79E26;font-size:22px;font-weight: 600;" id="numGongJiaoPercent" class="myfont">92%</p>

    </div>

  </div>

  <div class="charge_data pos_abs" style="top:500px;">
    <ul style="padding-left:0px;">
      <li>
        <div class="circle circle1"></div>
        <span style="color:#8BC6FB;">VIN</span>
        <span style="color:#E79E26;font-size: 18px;" id="vin" class="myfont">2160元</span>
      </li>

      <li>
        <div class="circle circle2"></div>
        <span style="color:#8BC6FB;">充电卡</span>
        <span style="color:#E79E26;font-size: 18px;" id="card" class="myfont">330元</span>
      </li>

      <li>
        <div class="circle circle3"></div>
        <span style="color:#8BC6FB;">APP</span>
        <span style="color:#E79E26;font-size: 18px;" id="app" class="myfont">8680元</span>
      </li>

      <li>
        <div class="circle circle4"></div>
        <span style="color:#8BC6FB;">微信</span>
        <span style="color:#E79E26;font-size: 18px;" id="wx" class="myfont">1207元</span>
      </li>
    </ul>
  </div>
</section>

<section class="site_center site_center2 fl" style="height: 980px;">
  <div id="mapcontainer3" style="width:1038px;height:1078px;position: absolute;left:-171px;top:-48px;"></div>

  <div class="center_nav" style="bottom:-100px;left: 56px;">



    <ul>



      <li>



        <p id="income_panorama">



          <img width="42" src="./img/panorama.png" alt=""><span>全景视图</span>



        </p>



      </li>



      <li class="active">



        <p id="income_streetscape">



          <img width="42" src="./img/streetscape.png" alt="" style="left:40px;"><span>街景视图</span>



        </p>



      </li>



    </ul>



  </div>

  <div class="center_list">

    <ul>
      <li id="site_overview">
        <img src="./img/distribution.png" alt="" style="left: 12px;width: 16px;height: 18px;">
        <p>站点分布</p>
      </li>
      <li id="user_overview">
        <img src="./img/user.png" alt="" style="height:18px;top:12px;">
        <p>站点用户</p>
      </li>
      <li class="active" id="income_overview">
        <img src="./img/revenue.png" alt="">
        <p>站点收入</p>
      </li>
    </ul>

  </div>

</section>

<section class="site_center site_center3 fl" style="padding-top: 8%;padding-left:12px;width: 22%;">
  <div style="width:420px;background: linear-gradient(to right,rgba(12, 37, 121,0), rgba(12, 37, 121,0.8));
		position: absolute;height: 1038px;top: -48px;right: -1px;"></div>

  <div class="center_title pos_abs">

    <div id="gross_income" class="animate_inside"></div>

    <h1>当日非公交总收入</h1>

  </div>

  <div class="pos_abs" style="margin-top:70px;">

    <span style="font-size:40px;" id="otherActualBalance" class="myfont otherActualBalance1">1069.23</span> 元

  </div>

  <div class="gun mt40 pos_abs" style="top:175px;">

    <img width="36" src="./img/overview-4.png" alt="">

    <p style="width:340px;">非公交充电收入</p>

    <p style="margin-top:6px;"><span style="font-size:40px;" id="otherPowerBalance"
        class="myfont otherPowerBalance1">699.2</span>

      <span id="otherPowerBalance_text" style="font-size:16px;"> 元 /</span>

      <span style="font-size:28px;color:#2CE3FC;" id="otherPowerPercent" class="myfont">8%</span>

    </p>

  </div>

  <div class="gun mt20 pos_abs" style="top:300px;">

    <h1 style="font-weight: 500;font-size:18px;">非公交总收入统计</h1>

    <div id="total_s" style="height:128px;width:148%;"></div>

  </div>

  <div class="gun mt20 pos_abs" style="top:454px;">

    <h1 style="font-weight: 500;font-size:18px;">非公交充电排行</h1>
    <div class="site_service" style="height:128px;width:118%;margin-top: 10px;">
      <ul>
        <li style="margin-bottom: 0px;">
          <div class="site_number"><span
              style="top:6px;background: url('./img/num1.png') no-repeat;background-size: 100% 100%;">1</span></div>
          <div class="site_content" style="margin-left:16%;padding-bottom: 0px;">
            <div class="site_name">
              <h3 class="fl"><span id="name1">出租车充电收入</span></h3>
              <p class="fr"><span style="font-size:18px;" id="actualBalance1" class="myfont">356</span></p>
            </div>
          </div>
        </li>

        <li style="margin-bottom: 0px;">
          <div class="site_number"><span
              style="top:6px;background: url('./img/num2.png') no-repeat;background-size: 100% 100%;">2</span></div>
          <div class="site_content" style="margin-left:16%;padding-bottom: 0px;">
            <div class="site_name">
              <h3 class="fl"><span id="name2">私家车充电收入</span></h3>
              <p class="fr"><span style="font-size:18px;" id="actualBalance2" class="myfont">123</span></p>
            </div>
          </div>
        </li>

        <li style="margin-bottom: 0px;">
          <div class="site_number"><span
              style="top:6px;background: url('./img/num3.png') no-repeat;background-size: 100% 100%;">3</span></div>
          <div class="site_content" style="margin-left:16%;padding-bottom: 0px;">
            <div class="site_name">
              <h3 class="fl"><span id="name3">环卫车充电收入</span></h3>
              <p class="fr"><span style="font-size:18px;" id="actualBalance3" class="myfont">89</span></p>
            </div>
          </div>
        </li>

      </ul>

    </div>

  </div>

</section>



<script src="js/getincomedata.js" type="text/javascript" charset="utf-8"></script>

<div class="line"></div>
<div class="line1"></div>
<!-- <script src="./js/jquery.countup.js" type="text/javascript" charset="utf-8"></script> -->
<!-- <script src="./js/jquery.waypoints.min.js" type="text/javascript" charset="utf-8"></script> -->
<script src="./js/TweenLite.min.js" type="text/javascript"></script>
<script src="./js/lem_counter.js" type="text/javascript"></script>
<script src="js/getincomedata.js" type="text/javascript" charset="utf-8"></script>
<script src="./js/getanimate.js" type="text/javascript" charset="utf-8"></script>

<script>
  $("#income_overview").click(function () {

    $('#part').load('./income-overview-streetscape.html', function () {
      $.myAnimate.incomeAnimate();
    });

  })


  $("#user_overview").click(function () {

    $('#part').load('./user-overview-streetscape.html', function () {
      $.myAnimate.userAnimate();
    });

  })

  $("#site_overview").click(function () {

    $('#part').load('./site-overview-streetscape.html', function () {
      $.myAnimate.siteAnimate();
    })

  })


  $("#income_panorama").click(function () {

    $('#part').load('./income-overview.html', function () {
      $.myAnimate.incomeAnimate();
    });

  })

  var b4 = echarts.init(document.getElementById("total_s")); // 非公交总收入统计

  GetTransIncomeIndicator(); // 首页 收入总览数据 非公交总收入统计



  function GetTransIncomeIndicator() {



    $.ajax({



      url: "/statistic/ScreenNewInCome/GetTransIncomeIndicator.json",



      type: "post",



      dataType: "json",



      data: {},



      success: function (res) {



        console.log(res)



        var getTransIncomeIndicator = res.getTransIncomeIndicator;



        b4.setOption(barChartOptions(getTransIncomeIndicator, '', '个人',



          '车队', true, 30));



      }



    })



  }

</script>

<script>

  window.forceWebGL = true;

  var map3 = new AMap.Map('mapcontainer3', {

    resizeEnable: true,

    rotateEnable: true,

    pitchEnable: true,

    zoom: 10,

    pitch: 50,

    viewMode: '3D', //开启3D视图,默认为关闭

    buildingAnimation: true, //楼块出现是否带动画

    mapStyle: 'amap://styles/39da5b5a6ff18f26344edb0027f314b2',

    expandZoomRange: true,

    zooms: [3, 20],

    center: [113.264943, 23.15551]

  });

  getStationInServiceMapData();



  function getStationInServiceMapData() {

    $.ajax({

      url: "/statistic/GuangJiaoUsersViewAjax/getStationInServiceMapData.json",

      data: {},

      dataType: "json",

      type: "POST",

      success: function (data) {

        var markers = [],

          positions = [];

        for (var i in data) {

          var position = {

            "siteid": data[i].stationId,

            "sitename": data[i].stationName,

            "sitexy": [data[i].lng, data[i].lat]

          };

          positions.push(position);

        }

        buildMarkers(markers, positions);

      },

      error: function () {

        AMUI.dialog.alert({

          title: '温馨提示',

          content: "网络异常！请稍后..."

        });

      }

    });

  }



  function buildMarkers(markers, positions) {

    var icon = new AMap.Icon({

      size: new AMap.Size(58, 58), // 图标尺寸

      image: 'img/marker.png', // Icon的图像

      imageSize: new AMap.Size(58, 58), // 根据所设置的大小拉伸或压缩图片

    });

    for (var i = 0, marker; i < positions.length; i++) {

      marker = new AMap.Marker({

        map: map3,

        position: positions[i]["sitexy"],

        offset: new AMap.Pixel(-22, -47),

        icon: icon, // 添加 Icon 图标 URL

        title: positions[i]["sitename"],

        siteid: positions[i]["siteid"],

      });

      marker.on('click', function () {

        location.href = "./site-overview-inside.html?stationID=" + this.B.siteid;

      });

      markers.push(marker);

    }

  }

</script>